# р╕Бр╕нр╕Зр╕Бр╕Ор╕лр╕бр╕▓р╕в - RPA RD Scraper & ChatBot (Refactored)

р╕гр╕░р╕Ър╕Ър╕гр╕зр╕Ър╕гр╕зр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Вр╣Йр╕нр╕лр╕▓р╕гр╕╖р╕нр╕ар╕▓р╕йр╕╡р╕нр╕▓р╕Бр╕гр╕Ир╕▓р╕Бр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣Мр╕Бр╕гр╕бр╕кр╕гр╕гр╕Юр╕▓р╕Бр╕г (RD) р╣Бр╕ер╕░ ChatBot р╕нр╕▒р╕Ир╕Йр╕гр╕┤р╕вр╕░р╕Чр╕╡р╣Ир╕Кр╣Ир╕зр╕вр╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕бр╣Вр╕Фр╕вр╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╕Ир╕▓р╕Бр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕гр╕┤р╕З (RAG)

---

## ЁЯМЯ р╕ар╕▓р╕Юр╕гр╕зр╕бр╕гр╕░р╕Ър╕Ъ (System Overview)

р╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣Мр╕Щр╕╡р╣Йр╣Бр╕Ър╣Ир╕Зр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕нр╕Бр╣Ар╕Ыр╣Зр╕Щ 2 р╕кр╣Ир╕зр╕Щр╕лр╕ер╕▒р╕Б:
1. **RPA Pipeline (Scraper)**: р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╣Ар╕зр╣Зр╕Ър╕кр╕гр╕гр╕Юр╕▓р╕Бр╕гр╣Бр╕Ър╕Ъ Step-by-Step р╕Хр╕▒р╣Йр╕Зр╣Бр╕Хр╣Ир╕Бр╕▓р╕гр╣Ар╕Бр╣Зр╕Ър╕Ыр╕╡ р╣Ар╕Фр╕╖р╕нр╕Щ р╕Ир╕Щр╕Цр╕╢р╕Зр╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓р╣Ар╕Кр╕┤р╕Зр╕ер╕╢р╕Б
2. **RAG Pipeline (AI ChatBot)**: р╕Щр╕│р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕бр╕▓р╕Чр╕│р╕Фр╕▒р╕Кр╕Щр╕╡ (Search Index) р╣Бр╕ер╕░р╣Гр╕Кр╣Й AI (Ollama) р╕кр╕гр╕╕р╕Ыр╕Др╕│р╕Хр╕нр╕Ър╕Чр╕╡р╣Ир╣Бр╕бр╣Ир╕Щр╕вр╕│

---

## ЁЯЫа р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З (Detailed Setup Guide)

р╕гр╕Ър╕Бр╕зр╕Щр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕нр╕Хр╕▓р╕бр╕ер╕│р╕Фр╕▒р╕Ър╕Фр╕▒р╕Зр╕Щр╕╡р╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕гр╕░р╕Ър╕Ър╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М:

### 1. р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╕кр╕ар╕▓р╕Юр╣Бр╕зр╕Фр╕ер╣Йр╕нр╕б (Environment)
р╣Ар╕гр╕▓р╣Бр╕Щр╕░р╕Щр╕│р╣Гр╕лр╣Йр╣Гр╕Кр╣Й **Conda** (р╕Ьр╣Ир╕▓р╕Щ Anaconda р╕лр╕гр╕╖р╕н Miniconda) р╣Ар╕Юр╕╖р╣Ир╕нр╕Ир╕▒р╕Фр╕Бр╕▓р╕г Python р╣Бр╕ер╕░ Dependencies:
1. р╣Ар╕Ыр╕┤р╕Ф Command Prompt р╕лр╕гр╕╖р╕н Terminal
2. р╕кр╕гр╣Йр╕▓р╕З Environment р╕Ир╕▓р╕Бр╣Др╕Яр╕ер╣М `conda.yaml`:
   ```bash
   # р╕кр╕│р╕лр╕гр╕▒р╕Ъ Robocorp/RCC (р╣Бр╕Щр╕░р╕Щр╕│)
   rcc venv create conda.yaml
   ```
   *р╕лр╕гр╕╖р╕нр╕Цр╣Йр╕▓р╕Ир╕░р╣Гр╕Кр╣Й pip р╕Ыр╕Бр╕Хр╕┤:*
   ```bash
   pip install -r requirements.txt
   ```

### 2. р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Ollama (р╕кр╕бр╕нр╕Зр╕Вр╕нр╕З AI)
1. р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Бр╕ер╕░р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Ollama р╕Ир╕▓р╕Б [ollama.com](https://ollama.com/)
2. р╣Ар╕Ыр╕┤р╕Ф Terminal р╣Бр╕ер╕░р╕Фр╕╢р╕Зр╣Вр╕бр╣Ар╕Фр╕ер╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Й (р╕Др╣Ир╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Др╕╖р╕н `qwen3:8b`):
   ```bash
   ollama pull qwen3:8b
   ```
   *р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕: р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Кр╕╖р╣Ир╕нр╣Вр╕бр╣Ар╕Фр╕ер╣Др╕Фр╣Йр╣Гр╕Щ `src/config/settings.py`*

### 3. р╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М
р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `output/` р╣Гр╕лр╣Йр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╕гр╕▒р╕Щр╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б р╣Бр╕Хр╣Ир╕Хр╣Йр╕нр╕Зр╕бр╕▒р╣Ир╕Щр╣Гр╕Ир╕зр╣Ир╕▓р╕бр╕╡р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╣Ар╕Вр╕╡р╕вр╕Щр╣Др╕Яр╕ер╣Мр╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М

---

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ (How to Use)

### р╕кр╣Ир╕зр╕Щр╕Чр╕╡р╣И 1: р╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е (RPA Pipeline)
р╕гр╕▒р╕Щр╕Хр╕▓р╕бр╕ер╕│р╕Фр╕▒р╕Ъ **Stage 1 р╕Цр╕╢р╕З 7** р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╣Др╕Фр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Юр╕гр╣Йр╕нр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ъ AI:

| Stage | р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕гр╕▒р╕Щ (р╕Ьр╣Ир╕▓р╕Щ Robocorp) | р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╣Др╕Фр╣Й |
| :--- | :--- | :--- |
| **Stage 1** | `python -m robocorp.tasks run tasks.py -t run_year` | `years.json` (р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Ыр╕╡) |
| **Stage 2** | `python -m robocorp.tasks run tasks.py -t run_month` | `months.json` (р╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Ар╕Фр╕╖р╕нр╕Щ) |
| **Stage 3** | `python -m robocorp.tasks run tasks.py -t run_collect_month_urls_task` | `month_document_urls.json` (р╕ер╕┤р╕Зр╕Бр╣Мр╣Ар╕нр╕Бр╕кр╕▓р╕г) |
| **Stage 4** | `python -m robocorp.tasks run tasks.py -t run_read_document_content_task` | `month_document_contents.json` (р╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓р╕Фр╕┤р╕Ъ) |
| **Stage 5** | `python -m robocorp.tasks run tasks.py -t run_filter_documents_task` | `month_document_contents_filtered.json` (р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕ер╕╡р╕Щ) |
| **Stage 6** | `python -m robocorp.tasks run tasks.py -t run_filter_documents_by_title_task` | р╕Бр╕гр╕нр╕Зр╕Хр╕▓р╕б Keyword р╕Чр╕╡р╣Ир╕кр╕Щр╣Гр╕И |
| **Stage 7** | `python -m robocorp.tasks run tasks.py -t run_summarize_filtered_documents_task` | р╕кр╕гр╕╕р╕Ыр╕Ыр╕гр╕░р╣Ар╕Фр╣Зр╕Щр╕кр╕│р╕Др╕▒р╕Нр╕Вр╕нр╕Зр╣Бр╕Хр╣Ир╕ер╕░р╣Ар╕гр╕╖р╣Ир╕нр╕З |

> [!TIP]
> **р╕Бр╕▓р╕гр╕Чр╕│р╕Др╕зр╕▓р╕бр╕кр╕░р╕нр╕▓р╕Ф (Cleanup)**: р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕ер╕Ър╣Др╕Яр╕ер╣М Log р╕Вр╕вр╕░р╕Чр╕╡р╣Ир╣Ар╕Бр╕┤р╕Фр╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╕гр╕▒р╕Щ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З:
> `python -m robocorp.tasks run tasks.py -t run_cleanup`

### р╕кр╣Ир╕зр╕Щр╕Чр╕╡р╣И 2: р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ ChatBot (Web UI)
р╣Ар╕бр╕╖р╣Ир╕нр╣Др╕Фр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щ Stage 5-7 р╣Бр╕ер╣Йр╕з р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕гр╕┤р╣Ир╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ ChatBot р╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡:
```bash
streamlit run app.py
```
*р╕гр╕░р╕Ър╕Ър╕Ир╕░р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╕Вр╕╢р╣Йр╕Щр╕бр╕▓ р╣Гр╕лр╣Йр╕Др╕╕р╕Ур╕Юр╕┤р╕бр╕Юр╣Мр╕Др╕│р╕Цр╕▓р╕бр╣Бр╕ер╕░р╣Ар╕ер╕╖р╕нр╕Бр╣Вр╕лр╕бр╕Фр╕Бр╕▓р╕гр╕кр╕гр╕╕р╕Ыр╣Др╕Фр╣Йр╕Ьр╣Ир╕▓р╕Щ Checkbox*

---

## ЁЯУВ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М (Project Structure)

```text
rpa_Doc/
тФЬтФАтФА src/
тФВ   тФЬтФАтФА config/
тФВ   тФВ   тФФтФАтФА settings.py          # тЪЩя╕П р╕Ир╕╕р╕Фр╕гр╕зр╕бр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (URL, Model, Paths)
тФВ   тФЬтФАтФА scrapers/                # ЁЯХ╖я╕П р╣Вр╕Др╣Йр╕Фр╕кр╣Ир╕зр╕Щр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е (Playwright)
тФВ   тФВ   тФЬтФАтФА year_collector.py
тФВ   тФВ   тФЬтФАтФА month_collector.py
тФВ   тФВ   тФЬтФАтФА document_url_collector.py
тФВ   тФВ   тФФтФАтФА document_reader.py
тФВ   тФЬтФАтФА rag/                     # ЁЯза р╣Вр╕Др╣Йр╕Фр╕кр╣Ир╕зр╕Щр╕кр╕бр╕нр╕З AI (Ollama + Vector Search)
тФВ   тФВ   тФФтФАтФА pipeline.py          # р╕лр╕▒р╕зр╣Гр╕Ир╕лр╕ер╕▒р╕Бр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ RAG
тФВ   тФФтФАтФА utils/                   # ЁЯЫая╕П р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕нр╕Кр╣Ир╕зр╕вр╣Ар╕кр╕гр╕┤р╕б
тФВ       тФЬтФАтФА document_filter.py
тФВ       тФЬтФАтФА document_summarizer.py
тФВ       тФФтФАтФА cleanup.py           # р╕Хр╕▒р╕зр╕ер╣Йр╕▓р╕З Log р╕Вр╕вр╕░
тФЬтФАтФА app.py                       # ЁЯМР р╣Ар╕зр╣Зр╕Ър╕нр╕┤р╕Щр╣Ар╕Хр╕нр╕гр╣Мр╣Ар╕Яр╕к (Streamlit)
тФЬтФАтФА tasks.py                     # ЁЯЪй р╕Ир╕╕р╕Фр╕гр╕зр╕бр╕Бр╕▓р╕гр╕гр╕▒р╕Щ Task р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
тФФтФАтФА output/                      # ЁЯТ╛ р╕Чр╕╡р╣Ир╣Ар╕Бр╣Зр╕Ър╣Др╕Яр╕ер╣М JSON р╣Бр╕ер╕░ Database р╣Бр╕Ьр╕Щр╕Чр╕╡р╣Ир╕Хр╕▒р╕зр╣Ар╕ер╕В
```

---

## тЪая╕П р╕Вр╣Йр╕нр╕Др╕зр╕гр╕гр╕░р╕зр╕▒р╕Зр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Фр╕╣р╣Бр╕ер╕гр╕▒р╕Бр╕йр╕▓

- **р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Гр╕Щр╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╕Вр╕╢р╣Йр╕Щр╕нр╕вр╕╣р╣Ир╕Бр╕▒р╕Ъ Timeout р╣Гр╕Щ `settings.py` р╕лр╕▓р╕Бр╣Ар╕Щр╣Зр╕Хр╕Кр╣Йр╕▓р╣Гр╕лр╣Йр╕Ыр╕гр╕▒р╕Ър╣Ар╕Юр╕┤р╣Ир╕бр╕Др╣Ир╕▓ `page_timeout`
- **р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╕лр╕▓р╕Бр╕бр╕╡р╕Бр╕▓р╕гр╕гр╕▒р╕Щр╣Гр╕лр╕бр╣И р╕гр╕░р╕Ър╕Ър╕Ир╕░р╣Ар╕Вр╕╡р╕вр╕Щр╕Чр╕▒р╕Ър╣Др╕Яр╕ер╣Мр╣Ар╕Фр╕┤р╕бр╣Гр╕Щ `output/` р╣Бр╕Щр╕░р╕Щр╕│р╣Гр╕лр╣Й Back up р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Нр╣Др╕зр╣Й
- **AI Model**: р╕лр╕▓р╕Бр╕кр╣Ар╕Ыр╕Бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╣Др╕бр╣Ир╕кр╕╣р╕З (VRAM р╕Щр╣Йр╕нр╕в) р╣Бр╕Щр╕░р╕Щр╕│р╣Гр╕лр╣Йр╣Гр╕Кр╣Йр╣Вр╕бр╣Ар╕Фр╕ер╕Вр╕Щр╕▓р╕Фр╣Ар╕ер╣Зр╕Бр╕ер╕З р╣Ар╕Кр╣Ир╕Щ `qwen3:4b` р╕лр╕гр╕╖р╕нр╣Вр╕бр╣Ар╕Фр╕ер╕Хр╕гр╕░р╕Бр╕╣р╕е `phi3`

---
*р╕Ир╕▒р╕Фр╕Чр╕│р╣Вр╕Фр╕в: р╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓р╕Эр╕╢р╕Бр╕кр╕лр╕Бр╕┤р╕Ир╕ир╕╢р╕Бр╕йр╕▓ р╕бр╕лр╕▓р╕зр╕┤р╕Чр╕вр╕▓р╕ер╕▒р╕вр╕кр╕Зр╕Вр╕ер╕▓р╕Щр╕Др╕гр╕┤р╕Щр╕Чр╕гр╣М р╕кр╕▓р╕Вр╕▓р╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕вр╕╡р╕кр╕▓р╕гр╕кр╕Щр╣Ар╕Чр╕и(р╕Хр╣Ир╕нр╣Ар╕Щр╕╖р╣Ир╕нр╕З) р╕гр╕лр╕▒р╕кр╕Щр╕▒р╕Бр╕ир╕╢р╕Бр╕йр╕▓ 6710210469 *
